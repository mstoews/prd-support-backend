generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRESQL_URL")
}

model prd_user {
  userid     String   @id
  createdAt  DateTime @db.Date
  updatedAt  DateTime @db.Date
  email      String
  password   String
  firstname  String?
  lastname   String?
  role       Role?
}

model prd_env {
  environment      String  @id @db.VarChar(15)
  description      String? @db.VarChar(30)
  sst_glossapi_url String  @db.VarChar(30)
  active           String  @db.VarChar(1)
  client_id        String  @db.VarChar(12)
}

model ct_main {
  client_id  String @id @db.VarChar(12)
  name       String @db.VarChar(30)
  active     String @db.VarChar(1)
  createdAt  DateTime @db.Date
  updatedAt  DateTime @db.Date
  email      String
}

model ct_addr {
  party_ref     String   @db.VarChar(12)
  client_ref    String   @db.VarChar(12)
  addr_type     String   @db.VarChar(4)
  contact_name  String   @db.VarChar(35)
  contact_title String   @db.VarChar(35)
  addr_line1    String   @db.VarChar(35)
  addr_line2    String   @db.VarChar(35)
  addr_line3    String   @db.VarChar(35)
  addr_line4    String   @db.VarChar(35)
  addr_line5    String   @db.VarChar(35)
  addr_line6    String   @db.VarChar(35)
  post_code     String   @db.VarChar(12)
  int_dial_code String   @db.VarChar(6)
  phone_no      String   @db.VarChar(20)
  fax_no        String   @db.VarChar(20)
  email         String   @db.VarChar(100)
  version_date  DateTime @db.Timestamp(6)
  version_no    Int
  version_user  String   @db.VarChar(12)

  @@id([party_ref, client_ref, addr_type])
}

model kb_task {
  task_id      String    @id
  party_ref    String?
  title        String?
  status       String?
  summary      String?
  type         String?
  priority     String?
  tags         String?
  estimate     Int?
  assignee     String?
  rankid       Int?
  color        String?
  classname    String?
  Id           Int?
  dependencies String?   @default("")
  description  String?
  due_date     DateTime? @default(now()) @db.Date
  parentId     Int?
  start_date   DateTime? @default(now()) @db.Date
  client_ref   String?
}

model kb_subtask {
  task_id  String
  subid    String
  desc     String?
  status   String?
  summary  String?
  type     String?
  estimate Int?

  @@id([task_id, subid])
}

model kb_priority {
  priority    String    @id
  description String?
  updatedte   DateTime?
  updateusr   String?
}

model kb_status {
  status      String    @id
  description String?
  updatedte   DateTime?
  updateusr   String?
}

model kb_type {
  type        String    @id
  description String?
  updatedte   DateTime?
  updateusr   String?
}

model kb_team {
  team_member String    @id
  first_name  String?
  last_name   String?
  location    String?
  title       String?
  updatedte   DateTime?
  updateusr   String?
  party_ref   String    @default("CMP")
}

model kb_comment {
  task_id      String    @id
  comment_text String?
  image_url    String?
  title        String?
  updatedte    DateTime?
  updateusr    String?
  party_ref    String    @default("CMP")
}

model ct_dashboard {
  client_id       Int     @unique @default(autoincrement())
  client_name     String? @db.VarChar(20)
  rag             String? @db.Char(1)
  trend           String?
  applications    String?
  type            String?
  csm             String?
  environment     String?
  open_issues     String?
  csm_contacts    String?
  t_m_goals       String?
  client_contacts String?

  @@id([client_id])
}

model ct_dashboards {
  clientid                Int
  dashboardtype           String  @db.VarChar(10)
  maintitle               String?
  maintitlecount          String?
  subtitle                String?
  maintitlecountyesterday String?
  maintitlecountthreedays String?
  maintitlecounttwodays   String?

  @@id([clientid, dashboardtype])
}

model ct_master {
  clientid    Int       @id
  client_name String?
  geneos_id   String?
  jira_id     String?
  remedy_id   String?
  location    String?
  description String?
  update_date DateTime? @db.Date
  update_user String?
}

model ct_csm_master {
  clientid               Int       @id
  clientname             String?
  rag                    String?
  rag_trend              String?
  application            String?
  type                   String?
  client_service_manager String?
  environment            String?
  open_issues            String?
  csm_contacts           String?
  timeandmaterialgoals   String?
  contacts               String?
  last_updated           DateTime? @db.Date
  last_updated_by        String?
}

model ct_alerts {
  geneos_id       Int       @id
  japan_date      DateTime? @db.Date
  day_of_the_week String?
  severity        String?
  client          String?
  gateway         String?
  entity          String?
  sampler         String?
  varname         String?
}

model ct_contacts {
  contact_id   Int       @id
  clientid     Int?
  name         String?
  email        String?
  phone_1      String?
  phone_2      String?
  country_code String?   @db.VarChar(3)
  position     String?
  update_date  DateTime? @db.Date
  update_user  String?
}

model ct_issue {
  issueid     Int       @id
  clientid    Int?
  severity    String?
  description String?
  start_date  DateTime? @db.Date
  due_date    DateTime? @db.Date
  update_date DateTime? @db.Date
  update_user String?
}

model ct_service_request {
  sr_id                String    @id
  first_name           String?
  last_name            String?
  summary              String?
  service_request_stat String?
  severity             String?
  requested_by         String?
  case_overview        String?
  work_around          String?
  assigned_to          String?
  submitted_by         String?
  target_date          DateTime? @db.Date
  product_name         String?
  info                 String?
}

enum Role {
  ADMIN
  TEAMOPERATOR
  TEAMSUPERVISOR
}
